---
title: "Javaレガシー帳票出力アプリをPythonにリメイクする"
emoji: "📄"
type: "tech"
topics: ["flask", "postgres", "python", "json"]
published: false
---

## 🛠 修正版：バックエンド重視・実務再構築型ポートフォリオ記事構成案

---

### ✅ はじめに

昔SIerにて、以下の構築の案件に関わったことがある。

JavaScript UI
Java (Service Layer)
Java (Repository Layer)
XML(MySQL)
DB

JVMが非常に重いことが多々あったのを思い出し、モダン構築で実現できないか考察した。

* この記事の目的：

  * レガシーJava+MyBatisアプリの構成・設計課題を洗い出し、Flaskでバックエンド中心に再構築した話
  * UI/UXではなく、**構成とデータ設計・PDF生成のロジック中心**
* 作ったもの：

  * 画面は1つ、テーブルも1つ。**でも業務アプリとして必要な流れは通ってる**
* この記事は誰向け？

  * Flaskでバックエンドアプリ作ってみたい人
  * シンプルな画面でもちゃんと考えた実装が知りたい人
  * 「レガシー帳票アプリに詰まってる人」

---

### ☠️ 1. 供養対象：旧アプリの構成と詰んだポイント

以下の記事で Python + Postgres + Apache2 の開発環境を作成済み(この構築ではApacheは未使用)
![](https://zenn.dev/nickelth/articles/ubuntuenvsetup)

また、WSL上でVSCodeを起動できるようにしている。

* Java（Service/Repository分離）＋MyBatis（XML）＋JavaScript + MySQL
* 帳票出力の流れが密結合で、保守性も拡張性も絶望的だった
* フロントとバックが密に絡んでて「改修したくても壊れる」状態
* 構造のイメージ図（雑でもあると読み手の理解が爆上がり）

---

### 🔧 2. Flaskで作り直したときの構成メモ

* Python + Flask + Jinja2 + PostgreSQL（※ORMはSQLAlchemyでもいいし、生でもいい）
* ディレクトリ構成：

  * `/routes/`
  * `/services/`
  * `/templates/`
  * `/static/`（最低限）など、構成の意図を書く
* DB構造は最小構成でも「設計思想」はこだわった

  * 納品書1テーブルにどう責務を分離したか（例：取引先名 vs 出力用文字列 vs ステータス）

---

### 🧠 3. 実装の主軸：バックエンドロジックの分離とPDF出力

* 入力補助（オートコンプリートなど）は**バックエンドからの返却形式を工夫した話**を軽く
* 帳票生成ロジックはどこに分離したか？（`services/` or `utils/`）

  * PDF生成の実装：HTMLテンプレート → PDF化のツール構成（WeasyPrint, wkhtmltopdf など）
  * スタイルに時間かけすぎず、それでも最低限見栄えするようにした工夫
* 保守性のための分離構造（“このへんは現場で効く”感ある）

---

### 👀 4. スクショ：静かに語る1画面の強さ

* 入力画面＋PDF出力結果のスクショ or GIF
* UIの見た目を語らず「どうデータを流してどう責務を分けたか」を説明
* レスポンシブ未対応について：

  * 「フロント側は必要最小限、スマホ対応は今回の目的から外れるため省略」

---

### 🧾 5. 実務的な学び・設計意識のメモ

* 画面やテーブル数じゃない、業務アプリに必要なロジックを見極めること
* 再構築を通じて得た「保守しやすさ」「分かりやすい責務分離」の重要性
* フルスタック風に見えて**あくまでバックエンド視点で作ってる**ことの明記

---

### 🧵 6. まとめ：帳票出力はバックエンドの業

* 見た目以上に、帳票PDFの出力って裏側が大事な話
* 実務経験をもとに、「動くだけじゃない構成」にしたつもり
* 次の展開（CI/CD化、S3保存、LambdaでPDF出力など）も今後検討中 みたいに締めても良し

---

## 💬 記事のトーンのヒント

* 地味だけど、設計はちゃんとやってるよ？感を出す
* 「画面は1つ、でも戦ってたのは構造」って伝えると強い
* テンションを上げすぎず、「再設計ってこういうこと」という姿勢を淡々と書くとZennっぽい

---

他に書きたい構成図やコードスニペットあれば、まとめ方一緒に考えるぞ。
ポートフォリオって言ったな？じゃあ、ちゃんと見せ場は“考えた跡”だ。それ以外は飾りだよ。
