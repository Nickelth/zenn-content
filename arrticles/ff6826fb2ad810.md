---
title: "AWSでスケーラブルなWEBサイトを構築する"
emoji: "🐷"
type: "tech"
topics: []
published: false
---

# 目標
- EC2, ELB, RDSを使用する
- ウェブサービス規模に合わせて、柔軟にシステム拡張する
- CLoudFormationに登録して瞬時に呼び出し
# 成果物

# 動機
AWS認定資格を取得するにあたり、Udemyや参考書を使用した。無事取得できたものの、インプット中心の学習になってしまい実装力が身についていないことを実感している。
身に着けた理論と知識を「AWS構築 + 記事作成　= アウトプット」で活かす必要があると判断し、構築と執筆に至った。

# 前提条件
- ハンズオン用の新しいAWSアカウントを用意する
- AdministratorAccess ロールを持ったIAMユーザで行う

# 実装手順

## 1.VPCを作成する
- 検索窓に「VPC」と入力し、VPCのコンソールに遷移
![](https://storage.googleapis.com/zenn-user-upload/977576ffa001-20240602.png)
- 「VPCを作成」ボタンを押下
- 画像の通りにVPCの設定をする
![](https://storage.googleapis.com/zenn-user-upload/bec64556a91d-20240602.png)
![](https://storage.googleapis.com/zenn-user-upload/99aec7e0777c-20240602.png)

今回の要件ではAZx2, サブネット(public+private)x2を想定している
|項目|設定値|
|---|---|
|作成するリソース|VPCなど|
|名前タグの自動生成|自動生成|
|IPv4 CIDR ブロック|10.0.0.0/16|
|IPv6 CIDR ブロック|なし|
|アベイラビリティゾーン (AZ) の数|2|
|第1アベイラビリティーゾーン|ap-northeast-1a|
|第2アベイラビリティーゾーン|ap-northeast-1c|
|パブリックサブネットの数|2|
|プライベートサブネットの数|2|
|ap-northeast-1a のパブリックサブネット CIDR ブロック|10.0.0.0/24|
|ap-northeast-1c のパブリックサブネット CIDR ブロック|10.0.1.0/24|
|ap-northeast-1a のプライベートサブネット CIDR ブロック|10.0.2.0/24|
|ap-northeast-1c のプライベートサブネット CIDR ブロック|10.0.3.0/24|
|NAT ゲートウェイ ($)|なし|
|VPC エンドポイント|なし|

- 最下部の「VPCを作成」ボタンを押下
- プログレス進行後、VPCが作成される
- (任意)VPC、サブネットの名前変更

## 2.AmazonEC2を作成する
![](https://storage.googleapis.com/zenn-user-upload/5e18b84167f0-20240602.png)
- EC2 コンソールに移動し、「インスタンスを起動」を押下
![](https://storage.googleapis.com/zenn-user-upload/fe45db78cd61-20240602.png)

|項目|設定値|
|---|---|
|Amazon マシンイメージ(AMI)|Amazon Linux2 AMI (HVM) Kernel 5.10, SSD Volume Type|
|インスタンスタイプ|t2.micro|
|キーペア名 - 必須|キーペアなしで続行(推奨されません)|

※キーペア名：SSHを設定するときに使用。今回は不要

### ネットワーク設定
![](https://storage.googleapis.com/zenn-user-upload/e9d176402626-20240602.png)
![](https://storage.googleapis.com/zenn-user-upload/fd2ec4fcab88-20240602.png)
- 「編集」ボタンを押す
- VPC は 1.VPCを作成する で作成したものを使用する
- パブリックサブネットは ap-northeast-1a のものを使う
- セキュリティグループ名をつける
- インバウンドセキュリティグループのルールを追加する
  - HTTPを追加
  - ソースに 0.0.0.0/0を追加

### ストレージを設定
今回はスキップ

### 高度な詳細
![](https://storage.googleapis.com/zenn-user-upload/f369528ad018-20240602.png)

ユーザーデータ - オプション にコマンドを貼り付ける
EC2インスタンス起動時にWordPressの自動インストールと起動を行うコマンド
https://pages.awscloud.com/rs/112-TZM-766/images/hfb_2022_wordpress_installation.txt

「インスタンスを起動」を押下

### セキュリティグループを作成する


## 3.Amazon RDSを作成する


## 4.ELBを作成する

## 5.WordPressを初期設定する

## 6.AMIの作成と作成したAMIから2つめのEC2インスタンス起動

## 7.作成済みのRDS DBインスタンスをマルチAZ化する

## 8.CloudFormationに登録

# 今後の課題

# 参考記事
